# Демо обработка для работы с MAX из 1С  

Репозиторий представляет собой исходники конфигурации в формате выгрузки xml файлов с одной обработкой. Из обработки можно отправить сообщение в мессенджер MAX. Интеграция с MAX сделана через REST сервис [green-api.com](https://green-api.com/max)  

Данная обработка создана на основе ранее разработанной обработки интеграции [WhatsApp с GREEN-API](https://github.com/green-api/whatsapp-api-client-1c).  

В процессе разработки была сохранена общая архитектура, логика взаимодействия с API и структура интерфейса, что обеспечивает единый подход к работе с мессенджерами в 1С.  

При этом обработка была адаптирована под особенности мессенджера MAX, включая авторизацтю по QR-коду.  

## Оглавление  

* Требования  
* Важные отличия MAX от WhatsApp  
  * Основные отличия  
* Возможности обработки  
* Регистрация и подготовка  
  * Процесс авторизации инстанса MAX (через QR-код)  
  * Подключение MAX в обработке  
  * Отправка сообщений  
  * Получение сообщений  
  * Журналы и очереди  
  * Группы  
* Работа с контактами и сообщениями  
* Партнёрский режим GREEN-API  
* Использование обработки в собственных конфигурациях  
  * Отправка сообщения в чат  
  * Отправка сообщения в группу  
* Установка обработки из исходников  


## Требования  
* Для запуска обработки нужна Платформа 1С не ниже версии 8.3.10.  
* Для загрузки исходников нужно Платформа 1С не ниже версии 8.3.16.1063  



## Использование обработки в собственных конфигурациях  

Обработка имеет программный интерфейс, оформленный в соответствии со [стандартами разработки 1С](https://its.1c.ru/db/v8std). Вы можете встроить ее в свою конфигурацию и вызывать АПИ на сервере через создание объекта. Пример использования:

### Отправка сообщения в чат  

```bsl
АПИ = Обработки.GreenAPI.Создать();
АПИ.IdInstance = "ВАШ_ИНСТАНС";
АПИ.ApiToken = "ВАШ_ТОКЕН";
Ответ = АПИ.ОтправитьТекст("79001234567", "Hello"); 
```

### Отправка сообщения в группу  

```bsl
АПИ = Обработки.GreenAPI.Создать();
АПИ.IdInstance = "ВАШ_ИНСТАНС";
АПИ.ApiToken = "ВАШ_ТОКЕН";
Ответ = АПИ.ОтправитьТекстВГруппу("79001234567-1615394251@g.us", "Hello"); 
```

## Установка обработки из исходников  

Исходники в репозитории - это xml выгрузка из конфигуратора 1С версии 8.3.16 в режиме совместимости с 8.3.10. Скачайте исходники с репозитория и загрузите в конфигуратор с помощью команды ``Конфигурация`` -> ``Загрузить конфигурацию из файлов``

